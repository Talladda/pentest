#этот код тоже работает, но в нем нет nmap
#import socket
#import sys
#mas = [20, 21, 22, 23, 25, 42, 43, 53, 67, 69, 80, 110, 115, 123, 137, 138, 139, 143, 161, 179, 443, 445, 514, 515, 993, 995, 1080, 1194, 1433, 1702, 1723, 3128, 3268, 3306, 3389, 5432, 5060, 5900, 5938, 8080, 10000, 20000]
#host = input('Введите имя сайта или IP адрес: ') # надо забирать данные из кода Жени
#for port in mas:
    #s = socket.socket()
    #s.settimeout(1)
    #try:
        #s.connect((host, port))
    #except socket.error:
        #pass
    #else:
        #s.close
        #print (host + ': ' + str(port) + ' порт активен')


import nmap

def scan_ip(ip_address):
    nm = nmap.PortScanner()

    nm.scan(ip_address, arguments="-O", sudo=True)

    result = []

    for host in nm.all_hosts():
        hostdata = {}

        hostos = []
        for osclass in nm[host]['osmatch']: #для обнаружения ОС нужны рут-права
            hostos.append(osclass['name'])

        hostdata['host_ip'] = host
        hostdata['state_ip'] = nm[host].state()
        hostdata['proto'] = nm[host].all_protocols()
        hostdata['os'] = hostos
        result.append(hostdata)

    return result

if __name__ == '__main__':
    r = scan_ip('192.168.235.2')
    print(r)